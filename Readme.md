# REST API для управления данными о перевалах

Этот проект представляет собой REST API для добавления, редактирования и получения данных о перевалах. API позволяет:
- Добавлять новые записи о перевалах.
- Получать информацию о конкретном перевале по его ID.
- Редактировать существующие записи, если они находятся в статусе "new".
- Получать список всех перевалов, отправленных пользователем с указанной почтой.

## Задача
Проект был разработан для управления данными о перевалах, включая их координаты, изображения и статус модерации. Основная задача — предоставить удобный интерфейс для добавления, редактирования и получения данных.

## Проверка и тестирование REST API
Для проверки и тестирования нужно запустить локальный сервер с помощью команды в терминале:
uvicorn main:app --reload
Далее перейти по адресу:
http://127.0.0.1:8000/docs 
Вы увидите интерактивную документацию, где можно тестировать все методы API.

## Реализованные методы

### 1. **Добавление новой записи**
- **Метод**: `POST /submitData`
- **Описание**: Добавляет новую запись о перевале.
- **Пример запроса**:
  ```json
  {
    "date_added": "2023-10-01T12:00:00",
    "raw_data": {
      "title": "Перевал Дятлова",
      "coordinates": {
        "latitude": 59.9343,
        "longitude": 30.3351
      },
      "user_email": "user@example.com",
      "user_name": "Иван Иванов",
      "user_phone": "+79001234567"
    },
    "images": {
      "image1": "base64_encoded_image_data"
    },
    "status": "new"
  }
  
Пример ответа:

{
  "status": 200,
  "message": "Данные успешно добавлены",
  "id": 1
}

2. Получение записи по ID
Метод: GET /submitData/{id}

Описание: Возвращает информацию о перевале по его ID.

Пример запроса: GET /submitData/1

Пример ответа:

{
  "id": 1,
  "date_added": "2023-10-01T12:00:00",
  "raw_data": {
    "title": "Перевал Дятлова",
    "coordinates": {
      "latitude": 59.9343,
      "longitude": 30.3351
    },
    "user_email": "user@example.com",
    "user_name": "Иван Иванов",
    "user_phone": "+79001234567"
  },
  "images": {
    "image1": "base64_encoded_image_data"
  },
  "status": "new"
}

3. Редактирование записи
Метод: PATCH /submitData/{id}

Описание: Редактирует существующую запись, если она в статусе "new".

Пример запроса:

{
  "raw_data": {
    "title": "Обновлённый перевал"
  }
}

Пример ответа:

{
  "state": 1,
  "message": "Запись успешно обновлена"
}

4. Получение записей по email пользователя
Метод: GET /submitData/?user__email={email}

Описание: Возвращает список всех перевалов, отправленных пользователем с указанной почтой.

Пример запроса: GET /submitData/?user__email=user@example.com

Пример ответа:

[
  {
    "id": 1,
    "date_added": "2023-10-01T12:00:00",
    "raw_data": {
      "title": "Перевал Дятлова",
      "coordinates": {
        "latitude": 59.9343,
        "longitude": 30.3351
      },
      "user_email": "user@example.com",
      "user_name": "Иван Иванов",
      "user_phone": "+79001234567"
    },
    "images": {
      "image1": "base64_encoded_image_data"
    },
    "status": "new"
  }
]

